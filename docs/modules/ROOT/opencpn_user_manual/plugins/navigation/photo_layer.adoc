indexmenu_n_8

== PhotoLayer

link:../../../manual/plugins/photolayer_pi.png.detail.html[image:../../../manual/plugins/photolayer_pi.png[image,width=50]]

PhotoLayer reads satellite geotiff photo overlay files (with
tranparency) which can then be displayed over the top of navigation
charts. The website venturefarther.com has geotiff files available.

=== Links

* Source: https://github.com/Rasbats/photolayer_pi[Github Repository]
* Releases: https://github.com/Rasbats/photolayer_pi/releases[Github
Releases]
* Forum:
http://www.cruisersforum.com/forums/f134/photolayer-plugin-satellite-geotiffs-with-transparency-194922.html[Photolayer
Plugin Thread]

=== Aim

To improve the safety of navigation in inadequately surveyed areas of
the world.

Using OpenGL it is possible to adjust the transparency of the GeoTiff
photo overlay.This allows the comparison of features from the photo
overlay with those shown on the chart. Where hydrographic surveys have
not been carried out recently and the charts are not to WGS84 standard
the photo overlay may provide a better guide to pilotage.

image:../../../dev/plugins/beta_plugins/photolayer/32.png[image]

This photo overlay is for a marina in the Canary Islands. Note the
position of the breakwaters.

=== Requirements

[source,code]
----
OpenCPN 4.2.0 and above.
----

=== 1. What and Why

In some areas of the world a satellite chart is more accurate than the
official chart. This plugin acts as a viewer for GeoTiff files. The
GeoTiffs are made from satellite photos and they can also be obtained
from other sources.

=== 2. Install

Download the plugin installer and run the installer .exe file from here
(Windows):

https://github.com/Rasbats/photolayer_pi/releases

Mac OS users note that libgeotiff is needed. See
http://www.cruisersforum.com/forums/f134/photolayer-plugin-satellite-geotiffs-with-transparency-194922.html#post2558166
and
http://www.cruisersforum.com/forums/f134/photolayer-plugin-satellite-geotiffs-with-transparency-194922.html#post2635911[Perhaps
you have forgotten to install libgeotiff from homebrew?]

=== 3. Standard actions

GeoTiff sources and the procedure for downloading these files is shown
in link:photolayer#geotiff_sources[this section].

NOTE: If making a KAP chart from a GeoTiff set the number of colours in
'Preferences' to, say, 64. The default setting of '2' will not work.

Open the toolbox and enable 'PhotoLayer'. At the same time make sure
that you are using OpenGL (Display → Advanced → Use Accelerated Graphics
(OpenGL))

Apply/Ok and on the toolbar you will find the PhotoLayer icon.

image:../../../dev/plugins/beta_plugins/photolayer/1.png[image]

Start the PhotoLayer plugin.

image:../../../dev/plugins/beta_plugins/photolayer/2.png[image]

File → Open and select a GeoTiff. The location will change to match the
photo overlay, which will appear superimposed.

image:../../../dev/plugins/beta_plugins/photolayer/3.png[image]

By moving the top transparency slider the transparency can be adjusted.
Complete transparency is shown here.

image:../../../dev/plugins/beta_plugins/photolayer/4.png[image]

And no transparency with maximum brightness of the overlay is here.

image:../../../dev/plugins/beta_plugins/photolayer/5.png[image]

If you were not using OpenGL the transparency slider would not have
worked. The brightness slider would have produced a picture like this.
At maximum the overlay will disappear.

image:../../../dev/plugins/beta_plugins/photolayer/6.png[image]

=== 4. Options / Warnings / Ideas

==== Options

The menu offers other options.

image:../../../dev/plugins/beta_plugins/photolayer/7.png[image]

“Save As” allows you to save a .png image, made from the overlay file.
Some distortion is noted.

image:../../../dev/plugins/beta_plugins/photolayer/8.png[image]

“Goto” can be used if there are several overlays in the list, to move
between the overlays.

image:../../../dev/plugins/beta_plugins/photolayer/9.png[image]

“Preferences” is used in combination with the “Export” facility, which
will create a kap chart file from the overlay.

image:../../../dev/plugins/beta_plugins/photolayer/10.png[image]

Set the number of colours as required. 64 works well. File→Export
creates and saves the kap. In order to display the kap it is necessary
to update the chart database.

image:../../../dev/plugins/beta_plugins/photolayer/11.png[image]

And the photo chart is displayed.

image:../../../dev/plugins/beta_plugins/photolayer/12.png[image]

Because of the kap format it is not possible to adjust the transparency
of the photo chart. The GeoTiff must be used.

Menu “Delete” is to remove a GeoTiff from the list of overlays that have
been opened. It does not delete the image file.

==== GeoTiff Sources

===== VentureFarther

The VentureFarther website https://venturefarther.com[linked here]
allows the selection of an area, which can be downloaded as a GeoTiff.

You will need to register with VentureFarther and obtain your API key
http://venturefarther.com[here]

*_Please read the 'Credits' page on the VentureFarther website. 1 Credit
is used for each single satellite chart download. Making a 'Multi-Chart'
download will use 9 credits, because it consists of 9 satellite charts.
Credits can be earned by submitting cruising information or you may
choose to purchase an annual subsciption._*

The source is chosen and the slider moved from “KAP” to “GEO”. “Generate
Chart” creates the GeoTiff which is downloaded to your system. It will
appear in the directory you have chosen for file downloads from the
Internet.

image:../../../dev/plugins/beta_plugins/photolayer/30.png[image]

The GeoTiff can be opened with PhotoLayer. The transparency of the
overlay can be adjusted, unlike the normal kaps from VentureFarther.

image:../../../dev/plugins/beta_plugins/photolayer/31.png[image]

===== SASPlanet

The SASPlanet program can be downloaded
http://sasplanet.software.informer.com/14.12/[here] The download is a
zip file. Extracting the zip creates a folder “SAS.Planet.xxxxxxx”, in
which is “SASPlanet.exe” which starts the program (from the folder).

image:../../../dev/plugins/beta_plugins/photolayer/20.0.png[image]

Open the map which will be used to create the GeoTiff. This time a
topographical map from
https://opentopomap.org/#map=12/43.7116/-7.6101[OpenTopoMaps] is used.

image:../../../dev/plugins/beta_plugins/photolayer/20.png[image]

Select the area of the map to export as a GeoTiff.

image:../../../dev/plugins/beta_plugins/photolayer/21.png[image]

Save as a GeoTiff in WGS84 Lat/Lon format.

image:../../../dev/plugins/beta_plugins/photolayer/22.png[image]

Remember to specify the file name and location for the GeoTiff!

image:../../../dev/plugins/beta_plugins/photolayer/23.png[image]

The GeoTiff produced can be viewed in OpenCPN using PhotoLayer.

image:../../../dev/plugins/beta_plugins/photolayer/25.png[image]

The hatching shows the limit if you try and zoom in too far with
OpenTopoMaps in SASPlanet.

image:../../../dev/plugins/beta_plugins/photolayer/24.png[image]
